{"version":3,"sources":["../../src/components/Audio.tsx","../../src/components/Video.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\n\nimport { useDevices } from '@/hooks/useDevices';\n\ninterface Props {\n  stream: MediaStream;\n}\n\ntype HTMLAudioElementWithSetSinkId = HTMLAudioElement & {\n  setSinkId: (id: string) => void;\n};\n\nexport const Audio: React.FC<\n  Props &\n    React.DetailedHTMLProps<\n      React.VideoHTMLAttributes<HTMLAudioElementWithSetSinkId>,\n      HTMLAudioElementWithSetSinkId\n    >\n> = ({ stream, ...rest }) => {\n  const audioElem = useRef<HTMLAudioElementWithSetSinkId>(null);\n\n  const { preferredDevice } = useDevices({ type: 'speaker' });\n\n  useEffect(() => {\n    const audioRef = audioElem.current;\n\n    if (stream && audioRef) {\n      audioRef.load();\n      audioRef.srcObject = stream;\n    }\n\n    if (audioRef && preferredDevice) {\n      audioRef.setSinkId?.(preferredDevice.deviceId);\n    }\n\n    return () => {\n      if (audioRef) {\n        audioRef.srcObject = null;\n      }\n    };\n  }, [audioElem.current, preferredDevice, stream]);\n\n  return (\n    // eslint-disable-next-line jsx-a11y/media-has-caption\n    <audio autoPlay playsInline controls={false} ref={audioElem} {...rest} />\n  );\n};\n","import React, { useEffect, useRef } from 'react';\n\ninterface Props {\n  stream: MediaStream;\n}\n\nexport const Video: React.FC<\n  Props &\n    React.DetailedHTMLProps<\n      React.VideoHTMLAttributes<HTMLVideoElement>,\n      HTMLVideoElement\n    >\n> = ({ stream, ...rest }) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    const videoObj = videoRef.current;\n\n    if (videoObj) {\n      videoObj.srcObject = stream;\n\n      videoObj.onloadedmetadata = async () => {\n        try {\n          await videoObj.play();\n        } catch (error) {\n          console.error(error);\n        }\n      };\n\n      videoObj.onerror = () => {\n        console.error('videoCard() | Error is hapenning...');\n      };\n    }\n  }, []);\n\n  return <video {...rest} ref={videoRef} autoPlay muted />;\n};\n"],"mappings":";;;;;;;AAAA,SAAgB,WAAW,cAAc;AA4CrC;AAhCG,IAAM,QAMT,CAAC,EAAE,QAAQ,GAAG,KAAK,MAAM;AAC3B,QAAM,YAAY,OAAsC,IAAI;AAE5D,QAAM,EAAE,gBAAgB,IAAI,WAAW,EAAE,MAAM,UAAU,CAAC;AAE1D,YAAU,MAAM;AACd,UAAM,WAAW,UAAU;AAE3B,QAAI,UAAU,UAAU;AACtB,eAAS,KAAK;AACd,eAAS,YAAY;AAAA,IACvB;AAEA,QAAI,YAAY,iBAAiB;AAC/B,eAAS,YAAY,gBAAgB,QAAQ;AAAA,IAC/C;AAEA,WAAO,MAAM;AACX,UAAI,UAAU;AACZ,iBAAS,YAAY;AAAA,MACvB;AAAA,IACF;AAAA,EACF,GAAG,CAAC,UAAU,SAAS,iBAAiB,MAAM,CAAC;AAE/C;AAAA;AAAA,IAEE,oBAAC,WAAM,UAAQ,MAAC,aAAW,MAAC,UAAU,OAAO,KAAK,WAAY,GAAG,MAAM;AAAA;AAE3E;;;AC9CA,SAAgB,aAAAA,YAAW,UAAAC,eAAc;AAmChC,gBAAAC,YAAA;AA7BF,IAAM,QAMT,CAAC,EAAE,QAAQ,GAAG,KAAK,MAAM;AAC3B,QAAM,WAAWD,QAAyB,IAAI;AAE9C,EAAAD,WAAU,MAAM;AACd,UAAM,WAAW,SAAS;AAE1B,QAAI,UAAU;AACZ,eAAS,YAAY;AAErB,eAAS,mBAAmB,YAAY;AACtC,YAAI;AACF,gBAAM,SAAS,KAAK;AAAA,QACtB,SAAS,OAAO;AACd,kBAAQ,MAAM,KAAK;AAAA,QACrB;AAAA,MACF;AAEA,eAAS,UAAU,MAAM;AACvB,gBAAQ,MAAM,qCAAqC;AAAA,MACrD;AAAA,IACF;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,SAAO,gBAAAE,KAAC,WAAO,GAAG,MAAM,KAAK,UAAU,UAAQ,MAAC,OAAK,MAAC;AACxD;","names":["useEffect","useRef","jsx"]}